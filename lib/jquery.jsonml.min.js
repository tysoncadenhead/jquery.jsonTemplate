!function(a){"use strict";a.jsonTemplate=function(){this.isAttribute=function(a){var b;switch(a){case"type":case"content":case"items":b=!1;break;default:b=!0}return b},this.addAttribute=function(b,c){var d="",e="";return this.isAttribute(b)&&("object"==typeof c?a.each(c,function(a,b){e+=a+":"+b+"; "}):e=c,d+=" "+b+'="'+e+'"'),d},this.addItem=function(b){var c;return b.type=b.type||"div","text/javascript"===b.type&&(b.type="script"),c="<"+b.type,a.each(b,function(a,b){c+=this.addAttribute(a,b)}.bind(this)),b.items||b.content||"script"===b.type?(c+=">",b.items?c+=this.addItems(b.items):b.content&&(c+=b.content),c+="</"+b.type+">"):c+=" />",c},this.addItems=function(b){var c="";return a.each(b,function(a,b){c+=this.addItem(b)}.bind(this)),c},this.init=function(b){return a.isArray(b)?this.addItems(b):this.addItem(b)}},a.encodeJsonTemplate=function(){this.hasTextNodes=function(b){var c=!1;return b.contents().filter(function(){a(this).parent().is(b)&&3===this.nodeType&&a(this).text().replace(/ /g,"").length>1&&(c=!0)}),c},this.getItem=function(b){var c=this,d={type:String(b.prop("tagName")).toLowerCase()};return"div"===d.type&&delete d.type,a(b[0].attributes).each(function(){"type"!==this.nodeName&&(d[this.nodeName]=this.nodeValue)}),b.children().length&&!this.hasTextNodes(b)?(d.items=[],b.children().each(function(){d.items.push(c.getItem(a(this)))})):d.content=b.html(),d},this.init=function(a){return a.length?this.getItem(a):{}}},a.fn.jsonTemplate=function(b){return b?(a(this).append((new a.jsonTemplate).init(b)),void 0):(new a.encodeJsonTemplate).init(a(this))}}(jQuery);